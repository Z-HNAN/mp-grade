require("./common/manifest.js")
require("./common/vendor.js")
global.webpackJsonpMpvue([1],{M93x:function(t,e,a){"use strict";var n=a("Mw+1"),r=a.n(n);var i=function(t){a("qnzt")},o=a("ybqe")(r.a,null,i,null,null);e.a=o.exports},"Mw+1":function(t,e){wx.cloud.init({traceUser:!0,env:"grade-production-b34221"})},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("5nAL"),r=a.n(n),i=a("M93x"),o=a("wtEF"),u=a("Icdr"),c=(a.n(u),a("4UDB")),s=(a.n(c),a("Vb+l")),d=(a.n(s),a("rjsW")),f=(a.n(d),a("80cc")),l=(a.n(f),a("XF7E")),h=a("tsch"),g=(a.n(h),a("TyNQ"));a.n(g);r.a.prototype.$store=o.a,r.a.prototype.$echarts=u,r.a.component("mpvue-echarts",l.a),r.a.config.productionTip=!1,i.a.mpType="app",new r.a(i.a).$mount()},PWH5:function(t,e,a){"use strict";var n=a("Dd8w"),r=a.n(n),i=a("RbY2");function o(t){for(var e=0;e<t.mp.touches.length;e+=1){var a=t.mp.touches[e];a.offsetX=a.x,a.offsetY=a.y}return t}e.a={props:{echarts:{required:!0,type:Object,default:function(){return null}},onInit:{required:!0,type:Function,default:null},canvasId:{type:String,default:"ec-canvas"},lazyLoad:{type:Boolean,default:!1},disableTouch:{type:Boolean,default:!1},throttleTouch:{type:Boolean,default:!1}},onReady:function(){this.echarts?this.lazyLoad||this.init():console.warn('组件需绑定 echarts 变量，例：<ec-canvas id="mychart-dom-bar" canvas-id="mychart-bar" :echarts="echarts"></ec-canvas>')},methods:{init:function(t){var e=this,a=wx.version.version.split(".").map(function(t){return parseInt(t,10)});if(a[0]>1||1===a[0]&&a[1]>9||1===a[0]&&9===a[1]&&a[2]>=91){var n=this.canvasId;this.ctx=wx.createCanvasContext(n);var r=new i.a(this.ctx,n);this.echarts.setCanvasCreator(function(){return r}),wx.createSelectorQuery().select("#"+n).boundingClientRect(function(a){if(a){var n=a.width,i=a.height;if("function"==typeof t?e.chart=t(r,n,i):"function"==typeof e.onInit?e.chart=e.onInit(r,n,i):e.chart=e.$emit("init",{canvas:r,width:n,height:i}),e.chart){var o=e.chart.getZr().handler;e.handler=o,e.processGesture=o.proxy.processGesture||function(){}}}else setTimeout(function(){return e.init()},50)}).exec()}else console.error("微信基础库版本过低，需大于等于 1.9.91。参见：https://github.com/ecomfe/echarts-for-weixin#%E5%BE%AE%E4%BF%A1%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82")},canvasToTempFilePath:function(t){var e=this.canvasId;this.ctx.draw(!0,function(){wx.canvasToTempFilePath(r()({canvasId:e},t))})},touchStart:function(t){var e=this.disableTouch,a=this.chart;if(!e&&a&&t.mp.touches.length){var n=t.mp.touches[0];this.handler.dispatch("mousedown",{zrX:n.x,zrY:n.y}),this.handler.dispatch("mousemove",{zrX:n.x,zrY:n.y}),this.processGesture(o(t),"start")}},touchMove:function(t){var e=this.disableTouch,a=this.throttleTouch,n=this.chart,r=this.lastMoveTime;if(!e&&n&&t.mp.touches.length){if(a){var i=Date.now();if(i-r<240)return;this.lastMoveTime=i}var u=t.mp.touches[0];this.handler.dispatch("mousemove",{zrX:u.x,zrY:u.y}),this.processGesture(o(t),"change")}},touchEnd:function(t){var e=this.disableTouch,a=this.chart;if(!e&&a){var n=t.mp.changedTouches?t.mp.changedTouches[0]:{};this.handler.dispatch("mouseup",{zrX:n.x,zrY:n.y}),this.handler.dispatch("click",{zrX:n.x,zrY:n.y}),this.processGesture(o(t),"end")}}}}},TyNQ:function(t,e){},UjVw:function(t,e,a){"use strict";var n=a("mvHQ"),r=a.n(n);e.a={getUserGradeByGradeId:function(t){return function(e){return t.userGradeList.filter(function(t){return t.gradeId===e})}},getGradeInfoByGradeId:function(t){return function(e){return t.gradeNameList.find(function(t){return t.id===e})}},getSimpleAllUserGrade:function(t){return function(){var e=[],a=t.userinfo.paperTypeIds,n=function(n){var r=a[n],i=t.gradeNameList.find(function(t){return t.id===r}),o=t.userGradeList.filter(function(t){return t.gradeId===r}).map(function(t){return t.gradeTotal});e.push({gradeId:i.id,gradeName:i.gradeName,maxGrade:i.maxGrade,grades:o})};for(var r in a)n(r);return e}},getTotalGrade:function(t){return function(){var e={totalId:t.userinfo.gradeId,totalName:"总分"},a=0;t.gradeNameList.forEach(function(t){return a+=t.maxGrade});var n=[];return t.paperPackage.forEach(function(e){var a=0;e.papers.forEach(function(e){a+=parseFloat(t.userGradeList.find(function(t){return t._id===e}).gradeTotal)}),n.push(a)}),console.log("============getTotalGrade==============="),e.maxTotal=a,e.grades=n,console.log(e),e}},getTotalDetailGrade:function(t){return function(){var e={gradeId:t.userinfo.gradeId,totalName:"总分"},a=0;t.gradeNameList.forEach(function(t){return a+=t.maxGrade});var n=[];return t.paperPackage.forEach(function(e){var a={};a.id=e._id,a.gradeObj={},a.gradeTotal=0,e.papers.forEach(function(e){var n=t.userGradeList.find(function(t){return t._id===e}),r=parseFloat(n.gradeTotal);a.gradeObj[n.gradeId]=r,a.gradeTotal+=r}),n.push(a)}),e.maxTotal=a,e.grades=n,e}},getGradeAvg:function(t){return function(){var e={avgName:"平均分",grades:[]};return t.gradeNameList.forEach(function(a){var n=t.userGradeList.filter(function(t){return t.gradeId===a.id}),r=0;0!==n.length&&(r=(r=n.reduce(function(t,e){return parseFloat(t)+parseFloat(e.gradeTotal)},0)/n.length).toFixed(2)),e.grades.push({gradeName:a.gradeName,maxGrade:a.maxGrade,value:r})}),e}},getGradeRank:function(t){return function(){var e={rankId:t.userinfo.gradeId,rankName:"年级排名",maxRank:460},a=[];return t.paperPackage.forEach(function(t){a.push(t.rank)}),e.grades=a,e}},getRandomTip:function(t){return function(){if(!t.tipsList||0===t.tipsList.length)return"感谢您对我的支持";var e=Math.floor(Math.random()*t.tipsList.length);return t.tipsList[e].content}},getDefaultPaper:function(t){return function(){var e=[];return t.userinfo.defaultPackage.forEach(function(a){var n=t.userGradeList.find(function(t){return t._id===a}),r=n._id,i=n.gradeName,o=n.gradeTitle,u=n.gradeTotal,c=n.gradeDate;e.push({_id:r,gradeName:i,gradeTitle:o,gradeTotal:u,gradeDate:c})}),{packageTitle:"未分类",grades:e}}},getPaperPackage:function(t){return function(){var e=[];return t.userinfo.paperPackage.forEach(function(a){var n=[],r=t.paperPackage.find(function(t){return t._id===a});r.papers.forEach(function(e){var a=t.userGradeList.find(function(t){return t._id===e}),r=a._id,i=a.gradeName,o=a.gradeTitle,u=a.gradeTotal,c=a.gradeDate;n.push({_id:r,gradeName:i,gradeTitle:o,gradeTotal:u,gradeDate:c})});var i={packageTitle:r.title,_id:r._id,rank:r.rank,grades:n};e.push(i)}),e}},getDetailGradeAvg:function(t){return function(e){var a=t.gradeNameList.find(function(t){return t.id==e}),n=t.userGradeList.filter(function(t){return t.gradeId==e}),i=a.gradeItemList.map(function(t){return{id:t.id,maxGrade:t.maxGrade,gradeName:t.topicName,value:0}}),o=0;return n.forEach(function(t){var e=t.gradeObj;"{}"!==r()(e)&&o++;var a=function(t){i.forEach(function(a){a.id==t&&(a.value=parseFloat(a.value)+parseFloat(e[t]))})};for(var n in e)a(n)}),o=0===o?1:o,i.forEach(function(t){return t.value=(t.value/o).toFixed(2)}),i}}}},XEkA:function(t,e){},XF7E:function(t,e,a){"use strict";var n=a("PWH5"),r=a("zzIm");var i=function(t){a("XEkA")},o=a("ybqe")(n.a,r.a,i,"data-v-5b365d9e",null);e.a=o.exports},Xu2r:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"f",function(){return r}),a.d(e,"g",function(){return i}),a.d(e,"e",function(){return o}),a.d(e,"d",function(){return u}),a.d(e,"a",function(){return c}),a.d(e,"b",function(){return s});var n="grade_name_list",r="userinfo",i="user_grade_list",o="tips_list",u="paper_package",c="add_gradeId_to_paperPackage",s="background_img"},lwq5:function(t,e,a){"use strict";e.a={gradeNameList:[],userinfo:{},userGradeList:[],tipsList:[],paperPackage:[]}},mUbh:function(t,e,a){"use strict";var n=a("mvHQ"),r=a.n(n),i=a("//Fk"),o=a.n(i),u=a("Xu2r");wx.cloud.database();e.a={getNameGradeList:function(t){var e=t.commit;return new o.a(function(t,a){wx.cloud.callFunction({name:"getGradeNameList",data:{}}).then(function(a){var n=a.result.map(function(t){return t.data[0]});e(u.c,n),t()})})},getUserinfo:function(t){var e=t.commit;return new o.a(function(t,a){var n={};wx.cloud.callFunction({name:"getUserinfo",data:{}}).then(function(a){n=a.result,e(u.f,n),t()})})},getUserGradeList:function(t){var e=t.commit;return new o.a(function(t,a){wx.cloud.callFunction({name:"getUsergrade",data:{}}).then(function(a){var n=a.result.data;e(u.g,n),t()})})},fixGrade:function(){return new o.a(function(t,e){wx.cloud.callFunction({name:"fixGrade",data:{}}).then(t)})},addGradeIdToDefaultPaper:function(t,e){(0,t.commit)(u.a,e)},updatePapaerPackage:function(t,e){(0,t.commit)(u.d,e)},getTipsList:function(t){var e=t.commit;return new o.a(function(t,e){wx.getStorage({key:u.e,complete:function(e){t(e.data)}})}).then(function(t){var a=JSON.parse(t||"[]");if(!(a&&a.length>0))return new o.a(function(t,e){var a=wx.cloud.database();a.collection("tips").get({success:function(e){wx.setStorage({key:u.e,data:r()(e.data)}),t(e.data)}})});e(u.e,a),reject()}).then(function(t){e(u.e,t)})},getPaperPackage:function(t){var e=t.commit;return new o.a(function(t,a){wx.cloud.callFunction({name:"getPaperPackage",data:{}}).then(function(a){e(u.d,a.result.data),t()})})},updateBackgroundImg:function(t,e){var a=t.commit;return new o.a(function(t,n){a(u.b,e),t()})}}},qnzt:function(t,e){},tsch:function(t,e){},ukYY:function(t,e,a){"use strict";var n,r=a("bOdI"),i=a.n(r),o=a("Xu2r");e.a=(n={},i()(n,o.c,function(t,e){t.gradeNameList=e}),i()(n,o.f,function(t,e){t.userinfo=e}),i()(n,o.g,function(t,e){t.userGradeList=e}),i()(n,o.e,function(t,e){t.tipsList=e}),i()(n,o.d,function(t,e){t.paperPackage=e}),i()(n,o.a,function(t,e){t.userinfo.defaultPackage.push(e)}),i()(n,o.b,function(t,e){t.userinfo.backgroundImg=e}),n)},wtEF:function(t,e,a){"use strict";var n=a("5nAL"),r=a.n(n),i=a("NYxO"),o=a("lwq5"),u=a("ukYY"),c=a("mUbh"),s=a("UjVw");r.a.use(i.a),e.a=new i.a.Store({state:o.a,mutations:u.a,actions:c.a,getters:s.a})},zzIm:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.canvasId?a("canvas",{staticClass:"ec-canvas",attrs:{id:t.canvasId,canvasId:t.canvasId,eventid:"0"},on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,error:t.error}}):t._e()},staticRenderFns:[]};e.a=n}},["NHnr"]);