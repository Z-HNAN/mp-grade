require("../../../common/manifest.js")
require("../../../common/vendor.js")
global.webpackJsonpMpvue([10],{"1IBA":function(a,e,t){"use strict";var r={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[a.isRender?a._e():t("div",{staticClass:"weui-loadmore"},[t("i",{staticClass:"weui-loading"}),a._v(" "),t("p",{staticClass:"weui-loadmore__tips"},[a._v(a._s(a.renderTips))])],1),a._v(" "),a.isRender?t("div",[t("div",{staticClass:"detail-line-wrap"},[t("grade-line-box",{attrs:{data:a.grades,gradeName:a.detailData.gradeName,gradeMax:a.detailData.maxGrade,toggerFresh:a.toggerFresh,url:"#",shadowColor:"#e36868",mpcomid:"0"}})],1),a._v(" "),t("div",{staticClass:"detail-line-wrap"},[t("div",{staticClass:"grade-line-wrap"},[t("grade-rank-box",{attrs:{data:a.rank,rankName:a.detailData.gradeName+"排名",toggerFresh:a.toggerFresh,maxRank:"500",shadowColor:"#e97f02",mpcomid:"1"}})],1)]),a._v(" "),t("div",{staticClass:"detail-line-wrap"},[t("div",{staticClass:"grade-line-wrap"},[t("grade-radar-box",{attrs:{data:a.avgGrade,avgName:a.detailData.gradeName+"平均分",shadowColor:"#a3bac2",mpcomid:"2"}})],1)]),a._v(" "),t("div",{staticClass:"detail-list weui-panel"},[t("div",{staticClass:"weui-panel__hd"},[a._v("各次成绩报告")]),a._v(" "),t("div",{staticClass:"weui-panel__bd"},[t("div",{staticClass:"weui-media-box weui-media-box_small-appmsg"},[t("div",{staticClass:"weui-cells"},a._l(a.gradeList,function(e,r){return t("div",{key:r,staticClass:"grade-detail-box-for"},[t("a",{staticClass:"weui-cell weui-cell_access",attrs:{eventid:"0_"+r},on:{click:function(e){a.handleDetailGrade(r)}}},[t("div",{staticClass:"weui-cell__bd weui-cell_primary"},[t("p",[a._v(a._s(e.gradeTitle)+"  "+a._s(e.gradeTotal)+"分")])],1),a._v(" "),t("span",{staticClass:"weui-cell__ft"},[a._v("点击查看")])]),a._v(" "),a.currentGradeDetailInedx===r?t("div",{staticClass:"detail-box-wrap list-line-box"},[t("div",{staticClass:"box-input-list clear-fix"},a._l(a.gradeItemList,function(i,d){return t("div",{key:d,staticClass:"box-item"},[t("grade-input-box",{attrs:{totalValue:i.maxGrade,inputTitle:i.topicName,inputValue:e.gradeObj[i.id],index:i.id,mpcomid:"3_"+r+"-"+d}}),a._v(" "),t("div",{staticClass:"input-content"},[a._v(a._s(e.gradeObj[i.id])+"分")])],1)}))]):a._e()])}))])])])]):a._e()])},staticRenderFns:[]};e.a=r},AlkJ:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("5nAL"),i=t.n(r),d=t("Vl5+");new i.a(d.a).$mount()},Iqte:function(a,e){},"Vl5+":function(a,e,t){"use strict";var r=t("XUmo"),i=t("1IBA");var d=function(a){t("Iqte")},s=t("ybqe")(r.a,i.a,d,"data-v-4778718b",null);e.a=s.exports},XUmo:function(a,e,t){"use strict";var r=t("pFYg"),i=t.n(r),d=t("//Fk"),s=t.n(d),n=t("mvHQ"),o=t.n(n),l=t("Dd8w"),c=t.n(l),u=t("HKtd"),g=t("wpP+"),v=t("9Ipl"),m=t("JlA0"),p=t("NYxO");e.a={data:function(){return{isLoader:!1,isRender:!1,toggerFresh:!1,detailData:{},gradeItemList:[],currentGradeDetailInedx:"",gradeList:[],avgGrade:[]}},props:["gradeId"],computed:c()({},Object(p.c)(["gradeNameList"]),{grades:function(){return this.gradeList.map(function(a){return parseFloat(a.gradeTotal)})},rank:function(){return this.gradeList.map(function(a){return parseFloat(a.gradeRank)})},renderTips:function(){return this.$store.getters.getRandomTip()}}),methods:{handleDetailGrade:function(a,e){if(this.currentGradeDetailInedx===a)return this.currentGradeDetailInedx="";this.currentGradeDetailInedx=a},getGradeItemList:function(){return wx.cloud.database().collection("paperSubject").where({id:this.gradeId}).get()},getTouristGrade:function(){var a=this;return wx.cloud.database().collection("mockGrade").where({gradeId:this.gradeId}).orderBy("gradeDate","asc").get().then(function(e){var t=a.getTouristAvgGrade(e.data);return console.log("=========="+a.gradeId+"================="),console.log(JSON.parse(o()({data:e.data,avgData:t}))),{data:e.data,avgData:t}})},getTouristAvgGrade:function(a){var e=a,t=this.detailData.gradeItemList.map(function(a){return{id:a.id,maxGrade:a.maxGrade,gradeName:a.topicName,value:0}}),r=0;return e.forEach(function(a){var e=a.gradeObj;"{}"!==o()(e)&&r++;var i=function(a){t.forEach(function(t){t.id==a&&(t.value=parseFloat(t.value)+parseFloat(e[a]))})};for(var d in e)i(d)}),r=0===r?1:r,t.forEach(function(a){return a.value=(a.value/r).toFixed(2)}),t},getGrade:function(){var a=this;return new s.a(function(e,t){e({data:a.$store.getters.getUserGradeByGradeId(a.gradeId),avgData:a.$store.getters.getDetailGradeAvg(a.gradeId)})})}},components:{gradeLineBox:u.a,gradeInputBox:g.a,gradeRankBox:v.a,gradeRadarBox:m.a},beforeMount:function(){var a=this;return console.log(this.gradeId),console.log(i()(this.gradeId)),this.isRender=!1,new s.a(function(e,t){wx.getUserInfo({complete:function(t){t.rawData?(a.detailData=a.gradeNameList.find(function(e){return e.id==a.gradeId}),a.gradeItemList=a.detailData.gradeItemList,e(a.getGrade())):a.getGradeItemList().then(function(t){a.detailData=t.data[0],a.gradeItemList=a.detailData.gradeItemList,e(a.getTouristGrade())})}}).then(function(e){a.gradeList=e.data,a.avgGrade=e.avgData,a.isRender=!0,a.toggerFresh=!a.toggerFresh})})},updated:function(){console.log("===========================")}}}},["AlkJ"]);